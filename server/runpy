!#/bin/bash

printf "\n\ndo you have sqlite installed? y/n\n"
read USERIN

sqlfiletar="sqlite-autoconf-3380200.tar.gz"
sqlurl="https://www.sqlite.org/2022/"
sqlfile="sqlite-autoconf-3380200"

if [[ "$USERIN" = "n" ]]
then
  	printf "\nyou answered no, now downloading sqlite\n\n"
	brew install sqlite
fi

echo "making db file"
touch crowdshop_dev_db.db
crowdpath=$(echo $(readlink -f crowdshop_dev_db.db))

mainpath=${crowdpath//////}

cd crowdshop_api
echo "creating env file"

python3 -m venv env
source env/bin/activate


export SQLALCHEMY_DATABASE_URI="sqlite://$mainpath"
export SQLALCHEMY_TRACK_MODIFICATIONS=False
export FLASK_ENV=development

pip install -r requirements.txt

python3 run.py

exit 0
